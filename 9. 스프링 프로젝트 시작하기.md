# 스프링 프로젝트 시작하기
### 자바 엔터프라이즈 플랫폼과 스프링 애플리케이션
스프링으로 만들 수 있는 애플리케이션의 종류에는 제한이 없다. 자바 언어를 사용하는 모든 종류의 프로젝트라면 어디든 사용할 수 있다. 웹을 이용하는 자바 
엔터프라이즈 시스템 개발, 스윙이나 이클립스 RCP로 만드는 독립형 프로그램, 사용할 수 있는 기능에 제한이 있기는 하겠지만 애플릿이나 모바일 애플리케이션 
개발에도 이용할 수 있다.

그러나 스프링은 주로 자바 엔터프라이즈 환경에서 동작하는 애플리케이션을 개발하는 목적으로 사용된다. 자바 엔터프라이즈 애플리케이션은 서버에서 동작하며 클라이언트를 상대로 서비스를 제공하도록 
되어 있다. 즉 클라이언트의 요청을 받아서 그에 대한 작업을 수행하고 그 결과를 돌려주는 것이 기본적인 동작 방식이다.
#### 클라이언트와 백엔트 시스템
엔터프라이즈 애플리케이션은 자신이 클라이언트가 돼서 또 다른 엔터프라이즈 시스템에 서비스를 요청할 수도 있다. 또는 데이터베이스나 레거시 시스템 같은 
엔터프라이즈 정보 시스템(EIS)이라고 불리는 백엔드 시스템의 기능을 이용해 동작하기도 한다.<br/>
> 가장 많이 사용되는 구조는 클라이언트가 웹 브라우저이고 백엔드 시스템이 DB인 구성이다. 간단히 'DB를 사용하는 웹 애플리케이션'이라고 한다. 

스프링 엔터프라이즈 애플리케이션이 이용하는 백엔드 시스템으로는 DB는 물론이고 메시징 서버, 메일 서버, 메인프레임도 가능하다. 자바가 제공하는 접속 방식을 지원하는 시스템이면 된다.
웹 서비스를 제공하는 서버도 자주 사용된다. 
#### 애플리케이션 서버
스프링으로 만든 애플리케이션을 자바 서버환경에 배포하려면 JavaEE(또는 J2EE) 서버가 필요하다. JavaEE 표준을 따르는 애플리케이션 서버는 크게 두 가지로 구분할 수 있다.
하나는 JavaEE의 대부분의 표준 기술을 지원하고 다양한 형태의 모듈로 배포가 가능한 완전한 웹 애플리케이션 서버(WAS)이고, 다른 하나는 웹 모듈의 배포만 가능한 경량급 WAS 또는 서블릿/JSP 컨테이너다.
* 경량급 WAS/서블릿 컨테이너
  * 스프링은 기본적으로 톰캣이나 제티같은 가벼운 서블릿 컨테이너만 있어도 충분하다.
* WAS
  * 고가의 WAS를 사용하면 성능 면에서는 대단히 낫지 않더라도 미션 크리티컬한 시스템에서 요구하는 고도의 안정성이나 고성능 시스템에서 필수적인 안정적인 리소스 관리, 레거시 시스템의 연동이나 기존 EJB로 개발된 모듈을 함께 사용하는 등의 필요가 있을 때 등에서 큰 장점이 있다.
##### 스프링소스 tcServer
실제로 개발환경과 운영환경에서 가장 많이 사용되는 자바 서버는 웹 모듈만 지원하는 서블릿 컨테이너인 아파치 톰캣이다. 스프링 개발을 책임지고 있는 기업인 스프링소스에는 
아파치 프로젝트인 HTTPD 서버와 톰캣의 핵심 개발자들이 포진해 있다. 톰캣 전문가인 이들이 중심이 돼서 톰캣을 기반으로 엔터프라이즈 스프링 애플리케이션에 최적화된 경량급 
애플리케이션 서버인 tcServer를 개발했다. tcServer를 이용하면 기존 톰캣에서는 아쉬웠던 고급 서버 관리 기능, 배포 기능과 진단 기능을 포함해서 톰캣 전문가에게 
받는 기술지원도 함께 제공받을 수 있다. 고급 WAS를 구매하는 데 비싼 비용을 들이기는 부담스럽고, 그렇다고 운영하고 관리하기 불편한데다 필요할 때 기술지원도 받을 길이 없는
 오픈소스 제품인 톰캣을 그대로 사용하기는 불안하다면 tcServer가 좋은 대안이다.
#### 스프링 애플리케이션의 배포 단위
1. 독립 웹 모듈
  * 스프링은 보통 war로 패키징된 독립 웹 모듈로 배포된다. 톰캣 같은 서블릿 컨테이너를 쓴다면 독립 웹 모듈이 유일한 방법이다. 
2. 엔터프라이즈 애플리케이션
  * 확장자가 ear인 엔터프라이즈 애플리케이션으로 패키징해서 배포할 수도 있다. 하나 이상의 웹 모듈과 별도로 분리된 공유 가능한 스프링 컨텍스트를 엔터프라이즈 애플리케이션으로 묶어주는 방법이다.
3. 백그라운드 서비스 모듈
  * rar 패키징 방법. rar는 리소스 커넥터를 만들어 배포할 때 사용하는 방식인데, 만약 스프링으로 만든 애플리케이션이 UI를 가질 필요는 없고 서버 내에서 백그라운드 서비스처럼 동작할 필요가 있다면 rar 모듈로 만들어서 배포할 수 있다.
> 운영 플랫폼이나 서버의 종류는 개발 중에라도 언제든지 필요에 따라 변경이 가능하다. 다만 특정 서버환경에서만 제공하는 기능을 사용한다면 변경이 힘들 수도 있다. 장기적으로 서버를 변경하거나 서버의 종류를 바꿀 가능성이 있다면, 서버의 기능에 종속되지 않도록 주의하거나 손쉽게 다른 서버의 기능으로 변경 가능하도록 추상화해서 사용해야 한다.
<hr/>

### 개발도구와 환경
#### JavaSE와 JavaEE
##### JavaSE/JDK
스프링 3.0은 JavaSE 5 버전에서 추가된 새로운 언어와 문법의 특징을 최대한 활용해서 개발됐기 때문에 기본적으로 JDK 5.0 또는 그 이상을 필요로 한다. 
##### JavaEE/J2EE
스프링 3.0이 사용될 자바 엔터프라이즈 플랫폼으로는 J2EE 1.4 버전이나 JavaEE 5.0이 필요하다.
#### IDE
스프링 애플리케이션은 자바 5 또는 그 이상의 언어를 지원하는 자바 개발도구와 스키마를 지원하는 XML 편집기 정도만 있다면 어떤 개발환경에서든지 불편 없이 개발이 가능하다. 여기에 ANT나 Maven 같은 빌드 툴을 지원하고 톰캣이나 자바 서버로 바로 배포해서 실행해볼 수 있는 환경이라면 더할 나위 없다.
#### SpringSource Tool Suite
스프링 애플리케이션 개발을 위한 IDE로 이클립스를 선택했다면, 스프링 개발업체인 스프링소스가 직접 만들어 제공하는 이클립스의 확장판인 SpringSource Tool Suite(STS)를 사용할 수 있다.

STS는 최신 이클립스를 기반으로 주요한 스프링 지원 플러그인과 관련 도구를 모아서 스프링 개발에 최적화되도록 만들어진 IDE다. 이클립스와 같이 플러그인 방식을 지원하는 툴을 사용하면 원하는 기능을 필요에 따라 추가할 수 있다는 장점이 있다. 반면에 각 플러그인과 이클립스의 버전을 호환하도록 계속 관리해야 하는 불편한 점도 있다. 그렇기 때문에 스프링소스가 제공하는, 플러인 조합이 완료된 STS를 사용하는 편이 여러모로 유리하다.
##### SpringIDE 플러그인
SpringIDE는 스프링 개발에 유용한 기능을 제공하는 플러그인의 모음이다. 스프링 프로젝트와 설정파일 생성 위저드, 편리한 스프링의 XML 설정파일 에디터, 빈의 의존관계 그래프, 네임스페이스 관리 기능 등의 편리한 기능과 도구를 제공한다.
###### SpringIDE의 XML 에디터의 자동완성 기능
* 빈 클래스 이름 자동완성
  * bean 태그의 class 애트리뷰트를 입력할 때 클래스 이름에 대한 자동완성을 지원한다. 카멜케이스 클래스 이름의 각 단어 첫 글자를 따서 입력하거나 클래스 이름 앞부분 몇 글자를 입력하고 Ctrl+Space Bar 키를 함께 눌러주면 된다.
  * 빈의 프로퍼티를 등록할 때도 수정자를 가진 클래스라면 property 태그의 name 부분에서 아무것도 입력하지 않은 채로 Ctrl+Space Bar를 눌러주면 클래스가 가진 프로퍼티 목록을 전부 볼 수 있다. 처음 한두 글자를 입력하고 찾으면 더 빨리 찾을 수 있다.
  * 마찬가지로 ref 애트리뷰트로 다른 빈을 참조할 때도 자동완성 기능을 사용할 수 있다.
* 빈 설정 오류 검증 기능
  * 개발 중에 클래스나 프러퍼티 이름이 변경됐거나 XML 파일을 직접 수정하다가 주요한 이름을 잘못 건드린 경우에 빈 설정 오류검증 기능이 도움이 된다.
  * 빈 설정 내용을 작업하다가 존재하지 않는 클래스 이름을 넣거나 잘못된 프러퍼티 이름을 지정하면 바로 오류마크를 보여줘서 문제가 있음을 확인시켜준다.
* 프로젝트 생성, 설정파일 생성, 빈 등록 위저드
  * 스프링 프로젝트 생성을 위해 스프링 프로젝트 위저드를 이용할 수 있다.
  * XML 설정파일 생성 위저드는 번거로운 스키마 선언부를 손쉽게 추가하거나 수정할 수 있게 해준다. 간단히 십여 개의 스프링 스키마/네임스페이스 중에서 원하는 것을 선택해 한 번에 XML 설정파일에 적용할 수 있다.
  * 빈을 등록할 때 XML을 직접 편집해서 입력하는 대신 위저드 방식으로 빈을 등록할수도 있다. 
* 빈 의존관계 그래프
  * SpringIDE는 XML 설정파일을 읽어서 자동으로 그래프를 그려준다. 각 빈이 서로 어떻게 참조하고 있는지, 어떤 프로퍼티를 갖고 있는지를 한눈에 볼 수 있다. 
* AOP 적용 대상 표시
  * AOP가 어려운 이유는 부가기능을 담은 어드바이스가 어느 오브젝트에 적용될지 한 눈에 보이지 않기 때문이다.
  * STS에는 SpringIDE 외에도 AJDT라는 AspectJ 개발플러그인이 함께 설치된다.
  * 이 AJDT의 지원으로 SpringIDE는 포인트컷이 적용되는 대상 빈을 설정파일 안에서 한눈에 확인할 수 있도록 해준다.
* 기타 지원 기능
  * SpringIDE는 스프링 포트폴리오 프레임워크에 대한 지원을 포함한 다양한 기능을 제공한다.
##### STS 플러그인
STS 플러그인은 스프링 개발과 설정파일 편집을 지원하는 SpringIDE에 더해서 스프링 애플리케이션의 서버 배치와 같은 추가 기능을 제공해준다. STS는 대부분의 최신 JavaEE 서버로의 배치는 물론이고 스프링에 최적화된 애플리케이션 서버인 tcServer 그리고 OSGi 플랫폼인 dmServer, 스프링 기반의 클라우드 서비스인 스프링소스 Cloud Foundry로 배치할 수 있는 기능을 제공해준다. 그 밖에도 VMForce와 같은 VMWare 가상화와 클라우드 서비스에도 손쉽게 스프링 애플리케이션을 배치할 수 있도록 지원해준다.
##### 기타 플러그인
* M2Eclipse
  * 자바의 대표적인 빌드 툴의 하나인 Maven을 지원하는 이클립스 플러그인이다. Maven은 특히 의존 라이브러리 관리에 뛰어나다. 외부의 리포지토리에 번들이라고 불리는 라이브러리와 의존정보를 두고 이를 프로젝트 모델 정보를 이용해 손쉽게 가져다 쓸 수 있게 되어 있다.
* AJDT
  * AspectJ Development Tool의 약자로, 이클립스에서 AspectJ AOP를 이용한 개발을 지원하는 편리한 툴이다. 
* VMCI
  * VMWare 서버 또는 워크스테이션과의 연동을 지원하는 플러그인이다. STS의 VMWare 배치 기능에 주로 사용되기 위해 추가된 것이다.
* 이클립스 표준 플러그인
  * 이클립스 플랫폼에서 제공하는 주요 표준 플러그인에 포함된 것으로는 웹 개발을 지원하는 WTP(Web Tool Platform), EMP(Eclipse Modeling Project), Mylyn, DSDP(Device Software Development Platform)등이 있다.
#### 라이브러리 관리와 빌드 툴
##### 라이브러리 관리의 어려움
스프링은 20개의 모듈과 100여 개의 직접 참조 라이브러리가 있지만 그 모든 모듈과 라이브러리가 매번 다 쓰이는 건 아니다. 필요한 기능과 사용하기로 결정한 기술에 따라서 적절한 선택이 필요하다. 

라이브러리 마다 여러 개의 버전이 있고, 각 라이브러리마다 정확히 어떤 버전을 사용해야 할지도 알아야 한다. 라이브러리 종류는 같지만 버전이 맞지 않으면 컴파일이 되지 않을 수 있고, 운이 나쁘면 컴파일은 정상적으로 되고 동작은 하지만 운영 중에 오류가 발생할 수 있다.

> 스프링을 이용한 애플리케이션을 만들 때 필요한 라이브러리의 종류와 버전을 적절히 선정하고 개발하면서 추가적으로 필요로 하는 라이브러리를 추가하거나 또는 제거하는 등의 관리 작업은 결코 쉬운 일이 아니다.
##### 라이브러리 선정
* 스프링 모듈
  * 사용할 기능과 기술 목록이 모두 만들어졌으면 일단 스프링 모듈부터 선정한다. 스프링에는 총 20개의 모듈이 있다. 
* 라이브러리
  * 스프링의 각 모듈은 또 다른 모듈에 의존하기도 하지만 오픈소스 라이브러리 또는 표준 API를 필요로 하기도 하고 경우에 따라서는 상용 제품의 라이브러리에 의존한다. 각 모듈이 반드시 필요로 하는 라이브러리가 무엇인지, 선택적으로 사용하는 것은 무언인지 스프링 모듈과 그에 의존하는 라이브러리의 종류와 특징을 살펴보고 그중에서 적절한 라이브러리를 선택한다.
##### 빌드 툴과 라이브러리 관리
Maven과 ANT는 자바의 대표적인 빌드 툴이다. 

이클립스와 같은 IDE는 코드만 작성하면 자동으로 컴파일해주는 자동빌드 기능이 있고, 관련 빌더를 추가하거나 확장함으로써 복잡한 빌드 작업도 간단히 진행할 수 있다. 하지만 IDE를 사용할 수 있는 환경이 아닌 경우에도 일관된 빌드가 가능하도록 만드는 것이 중요하다. 그래서 자동빌드 기능을 지원하는 IDE를 기본적으로 이용하면서 ANT나 Maven 같은 환경에 독립적인 빌드 툴을 함께 사용하는 것이 바람직하다.

ANT가 이클립스에 기본 내장돼서 제공될 정도로 사실상 표준 자바 빌드 툴로 자리 잡고 있을 때 Maven이라는 새로운 개념의 빌드 툴이 등장했다. Maven은 단순 빌드 툴을 넘어서 개발 과정에서 필요한 빌드, 테스트, 배치, 문서화, 리포팅 등의 다양한 작업을 지원하는 종합 프로젝트 관리 툴의 성격을 띠고 있다. Maven의 특징은 POM이라고 불리는 프로젝트 모델 정보를 이용한다는 점이다. 그래서 절차적인 스크립트와 구조가 비슷한 ANT와 달리 Maven은 선언적이다. 프로젝트의 주요한 구조와 특징, 필요한 정보를 POM의 프로젝트 모델 정보로 만들어두면, 이를 참조해서 Maven에 미리 정해진 절차에 따라 빌드 또는 프로젝트 관리 작업을 진행할 수 있다. 

Maven POM이 가진 독특한 특징 중의 하나는 애플리케이션이 필요로 하는 의존 라이브러리를 선언해두기만 하면 원격 서버에서 이를 자동으로 다운로드 받아서 사용할 수 있게 해주는 것이다. 

Maven의 의존 라이브러리 관리 기능이 제공하는 더 흥미로운 기능은 전이적(transitive) 의존 라이브러리 추적 기능이다. POM의 의존정보에 하나의 라이브러리를 지정하면, 지정된 라이브러리가 동작하는 데 필요한 여타 라이브러리까지 함께 다운로드해주는 기능이다. 
